sap.ui.define(["cuprum/zmm_ptplayouts/controller/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/ui/export/Spreadsheet","sap/m/MessageBox","sap/ui/core/Fragment","sap/m/MessageToast","cuprum/zmm_ptplayouts/model/formatter"],function(e,t,o,l,r,i,a,s,n,d){"use strict";e:n;const g="VIRTUAL";const u="MP";const c="PT";var _="VIRTUAL";return e.extend("cuprum.zmm_ptplayouts.controller.Main",{onInit:function(){this.loadRequestModel()},loadRequestModel(){let e=this.getRequestModel();this.getView().setModel(e,"requestModel");var t=new sap.ui.model.json.JSONModel;var o=new sap.ui.model.json.JSONModel;var l=new sap.ui.model.json.JSONModel;var r=new sap.ui.model.json.JSONModel;var i=new sap.ui.model.json.JSONModel;t.setData(this.get_MP_layout());o.setData(this.get_PT_layout());l.setData(this.get_VE_layout());this.getView().setModel(t,"mpColumsModel");this.getView().setModel(o,"ptColumnsModel");this.getView().setModel(l,"veColumnsModel");this.getView().setModel(r,"facturasModel");this.getView().setModel(i,"facturasModel_local")},onVHLifnrRequest:function(e){let t="Proveedor";this._loadRemoteOdataServices(_,t);console.log("onVH_proveedor_request");if(!this._oVH_material_Dialog){this._oVH_material_Dialog=a.load({name:"cuprum.zmm_ptplayouts.view.fragments.ProveedorSelectionDialog",controller:this}).then(function(e){this.getView().addDependent(e);a.byId("ProveedorFragment","input_sociedad")?.attachSuggestionItemSelected(this.onSociedadSelected,this);return e}.bind(this))}this._oVH_material_Dialog.then(function(e){e.open()})},onVHSearchLifnr:function(e){let l=e.getParameter("value");let r=new t("Lifnr",o.Contains,l);let i=new t("LifnrName",o.Contains,l);var a=new t({filters:[r,i],and:false});e.getSource().getBinding("items").filter([a])},onVHCloseLifnr:function(e){var t=e.getParameter("selectedItem");if(t){var o=this.getView().byId(this._lifnrInputId);o.setValue(t.getTitle())}e.getSource().getBinding("items").filter([])},onVHBukrs_EV_Request:function(e){let l=e.getSource().getValue();this._bukrs_EV_InputId=e.getSource().getId();if(!this._oVHBukrs_EV_Dialog){this._oVHBukrs_EV_Dialog=sap.ui.xmlfragment("cuprum.zmm_ptplayouts.view.fragments.Bukrs_EV_SelectionDialog",this);this.getView().addDependent(this._oVHBukrs_EV_Dialog)}this._oVHBukrs_EV_Dialog.getBinding("items").filter([new t("bukrs",o.Contains,l)]);this._oVHBukrs_EV_Dialog.open(l)},onVHSearchBukrs_EV:function(e){let l=e.getParameter("value");let r=new t("bukrs",o.Contains,l);let i=new t("butxt",o.Contains,l);var a=new t({filters:[r,i],and:false});e.getSource().getBinding("items").filter([a])},onVHCloseBukrs_EV:function(e){var t=e.getParameter("selectedItem");if(t){var o=this.getView().byId(this._bukrs_EV_InputId);o.setValue(t.getTitle())}e.getSource().getBinding("items").filter([])},onVHBukrs_MP_Request:function(e){let l=e.getSource().getValue();this._bukrs_MP_InputId=e.getSource().getId();if(!this._oVHBukrs_MP_Dialog){this._oVHBukrs_MP_Dialog=sap.ui.xmlfragment("cuprum.zmm_ptplayouts.view.fragments.Bukrs_MP_SelectionDialog",this);this.getView().addDependent(this._oVHBukrs_MP_Dialog)}this._oVHBukrs_MP_Dialog.getBinding("items").filter([new t("bukrs",o.Contains,l)]);this._oVHBukrs_MP_Dialog.open(l)},onVHSearchBukrs_MP:function(e){let l=e.getParameter("value");let r=new t("bukrs",o.Contains,l);let i=new t("butxt",o.Contains,l);var a=new t({filters:[r,i],and:false});e.getSource().getBinding("items").filter([a])},onVHCloseBukrs_MP:function(e){var t=e.getParameter("selectedItem");if(t){var o=this.getView().byId(this._bukrs_MP_InputId);o.setValue(t.getTitle())}e.getSource().getBinding("items").filter([])},onVHBukrs_PT_Request:function(e){let l=e.getSource().getValue();this._bukrs_PT_InputId=e.getSource().getId();if(!this._oVHBukrs_PT_Dialog){this._oVHBukrs_PT_Dialog=sap.ui.xmlfragment("cuprum.zmm_ptplayouts.view.fragments.Bukrs_PT_SelectionDialog",this);this.getView().addDependent(this._oVHBukrs_PT_Dialog)}this._oVHBukrs_PT_Dialog.getBinding("items").filter([new t("bukrs",o.Contains,l)]);this._oVHBukrs_PT_Dialog.open(l)},onVHSearchBukrs_PT:function(e){let l=e.getParameter("value");let r=new t("bukrs",o.Contains,l);let i=new t("butxt",o.Contains,l);var a=new t({filters:[r,i],and:false});e.getSource().getBinding("items").filter([a])},onVHCloseBukrs_PT:function(e){var t=e.getParameter("selectedItem");if(t){var o=this.getView().byId(this._bukrs_PT_InputId);o.setValue(t.getTitle())}e.getSource().getBinding("items").filter([])},_selectLayout:function(e){_=e.getSource().getSelectedKey();let t=this.getView().getModel("requestModel");console.log(_,t.getData());this.clearSearchItems(_);console.log(true);if(_==="VIRTUAL"){t.setProperty("/Global/tableEV",true);t.setProperty("/Global/tablePT",false);t.setProperty("/Global/tableMP",false);t.setProperty("/Virtual/showOC",true);t.setProperty("/Virtual/showFacturas",true);t.setProperty("/Global/showMaterial",true);t.setProperty("/Virtual/showSociedad",true);t.setProperty("/MP/sowProveedor",false);t.setProperty("/Virtual/showCliente",true);t.setProperty("/MP/showNumParte",false);this._loadRemoteOdataServices(g)}else if(_==="MP"){this._loadRemoteOdataServices(u);t.setProperty("/Global/tableMP",true);t.setProperty("/Global/tablePT",false);t.setProperty("/Global/tableEV",false);t.setProperty("/MP/sowProveedor",true);t.setProperty("/MP/showNumParte",true);t.setProperty("/Virtual/showFacturas",false);t.setProperty("/Global/showMaterial",false);t.setProperty("/Virtual/showCliente",false);t.setProperty("/Virtual/showSociedad",true);t.setProperty("/Virtual/showOC",false);this.destroyModel("materialModel_ev")}else if(_==="PT"){this._loadRemoteOdataServices(c);t.setProperty("/Global/tablePT",true);t.setProperty("/Global/tableMP",false);t.setProperty("/Global/tableEV",false);t.setProperty("/Global/showMaterial",true);t.setProperty("/Virtual/showSociedad",true);t.setProperty("/MP/sowProveedor",false);t.setProperty("/Virtual/showFacturas",false);t.setProperty("/Virtual/showCliente",false);t.setProperty("/MP/showNumParte",false);t.setProperty("/Virtual/showOC",false)}},clearSearchItems(e){let t=this.getView().getModel("requestModel");if(e===g){t.setProperty("/MP/proveedor","");t.setProperty("/MP/numParte","");t.setProperty("/Global/sociedad_inicio","");t.setProperty("/Global/sociedad_fin","");t.setProperty("/Global/material_inicio","");t.setProperty("/Global/material_fin","")}else if(e===u){t.setProperty("/Virtual/factura_inicio","");t.setProperty("/Virtual/factura_fin","");t.setProperty("/Virtual/oc_inicio","");t.setProperty("/Virtual/oc_fin","");t.setProperty("/Virtual/cliente","");t.setProperty("/Global/material_inicio","");t.setProperty("/Global/material_fin","");t.setProperty("/Global/sociedad_inicio","");t.setProperty("/Global/sociedad_fin","")}else if(e===c){t.setProperty("/Virtual/factura_inicio","");t.setProperty("/Virtual/factura_fin","");t.setProperty("/Virtual/oc_inicio","");t.setProperty("/Virtual/oc_fin","");t.setProperty("/Virtual/cliente","");t.setProperty("/Global/material_inicio","");t.setProperty("/Global/material_fin","");t.setProperty("/Global/sociedad_inicio","");t.setProperty("/Global/sociedad_fin","");t.setProperty("/MP/proveedor","");t.setProperty("/MP/numParte","")}},matnrSelectionFinish:function(e){let t=this.getView().getModel("requestModel");t.setProperty("/matnr","");var o=e.getParameter("selectedItems");let l=new Array;for(var r=0;r<o.length;r++){let e={Matnr:o[r].getKey(),Text:o[r].getText()};l.push(e)}t.setProperty("/matnr",l);console.log("fin matnr",t.getProperty("/matnr"))},exportExcel:function(e){let t=this.validations();let o;let l=this.getView().getModel("requestModel");if(t){var i;let t=this.byId(e);if(l.getProperty("/Global/tableEV")){i="Layout Expo Virtuales.xlsx";o=g}else if(l.getProperty("/Global/tableMP")){i="Layout MP.xlsx";o=u}if(l.getProperty("/Global/tablePT")){i="Layout PT.xlsx";o=c}let a=t.getBinding("rows");let s=this.getColums(o);let n={workbook:{columns:s,hierarchyLevel:"Level"},dataSource:a,fileName:i,worker:false};let d=new r(n);d.build().finally(function(){d.destroy()})}},getLayout:async function(e,t){this.getView().setBusy(true);let o=this;let l=this.getUrlFilters(e);let r=[];async function a(e,o){return new Promise((l,r)=>{t.read(e,{filters:o,success:function(e,t){let o=parseInt(e);l(o)},error:r})})}async function s(e,o,l=false,r=5e3){return new Promise((i,a)=>{let s={success:i,error:a};if(l){s.filters=o;s.urlParameters={$top:r}}t.read(e,s)})}try{let t=l[0].url;let d=l[0].urlCount;let _=l[0].filters;let h=await a(d,_);let p=true;let f=true;while(p){let e=await s(t,_,f,h);f=false;r=r.concat(e.results||[]);if(e.__next){console.log("Next URL:",e.__next);let o=e.__next.split("/Set?")[1];let r="/ZZ1_CDS_LAYOUT_EV(p_fecha='"+l[0].fecha+"')/Set?"+o;t=r}else{p=false}}let V=new sap.ui.model.json.JSONModel;V.setData(r);console.log(r);var n=this.get_Resource_Bundle();let M=n.getText("sinResultados");let m=n.getText("sinResultados");if(r.length>0){if(e===g){o.getView().setModel(V,"evLayoutModel")}else if(e===u){o.getView().setModel(V,"mpLayoutModel")}else if(e===c){o.getView().setModel(V,"ptLayoutModel")}}else{i.warning(M)}}catch(e){console.log("Error al cargar el layout:",e);let t=this.get_Resource_Bundle();let o=t.getText("sinResultados");i.error(o)}finally{this.getView().setBusy(false)}},onSearchButton:function(){let e=this.validations();var t;var o=this.get_Resource_Bundle();var l=o.getText("file");let r=this.getView().getModel("requestModel");this.clearTable();debugger;if(e){if(r.getProperty("/Global/tableEV")){t=this.getView().getModel("EV_LayoutService");if(this.getView().getModel("mpLayoutModel")){this.getView().getModel("mpLayoutModel").setData()}if(this.getView().getModel("ptLayoutModel")){this.getView().getModel("ptLayoutModel").setData()}this.getLayout(g,t)}else if(r.getProperty("/Global/tableMP")){t=this.getView().getModel("MP_LayoutService");if(this.getView().getModel("evLayoutModel")){this.getView().getModel("evLayoutModel").setData()}if(this.getView().getModel("ptLayoutModel")){this.getView().getModel("ptLayoutModel").setData()}this.getLayout(u,t)}if(r.getProperty("/Global/tablePT")){t=this.getView().getModel("PT_LayoutService");if(this.getView().getModel("evLayoutModel")){this.getView().getModel("evLayoutModel").setData()}if(this.getView().getModel("mpLayoutModel")){this.getView().getModel("mpLayoutModel").setData()}this.getLayout(c,t)}}},validations:function(){var e=this.getView().byId("MainView_DateRangeSelection").getValue();var t=true;var o=this.get_Resource_Bundle();var l=o.getText("errorFecha");if(!e){t=false;i.error(l,{title:"Error",contentWidth:"30%",dependentOn:this.getView()})}return t},onDateChange:function(e){var t=e.getParameter("from"),o=e.getParameter("to"),l=e.getParameter("valid"),r=e.getSource();if(e.getParameter("valid")){this.getView().getModel("requestModel").setProperty("/Global/dateFrom",t);this.getView().getModel("requestModel").setProperty("/Global/dateTo",o)}else{i.error("Elegir rango de fecha valido",{title:"Error",contentWidth:"30%",dependentOn:this.getView()})}},_loadRemoteOdataServices:async function(e,t=""){let o=this.getView().getModel("requestModel");o.setProperty("/Global/isBusyVH",true);let l=this;async function r(e,t){return new Promise((o,l)=>{t.read(e,{success:function(e){let t=parseInt(e);o(t)},error:l})})}async function a(e,t,o,l){return new Promise((r,i)=>{o.read(l,{urlParameters:{$top:t,$skip:e},success:r,error:i})})}let s=[];let n=this;if(e===g){try{o.setProperty("/Global/isBusyVH",true);if(!this.getView().getModel("materialModel_ev")){let e="/ZZ1_CDS_SEARCH_HELP_PARNR";let t=this.getView().getModel("EV_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"materialModel_ev");n.getView().setModel(e,"materialModel");console.log("materialModel_ev cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}if(!this.getView().getModel("sociedadModel_ev")){let e="/ZZ1_CDS_SEARCH_HELP_BUKRS";let t=this.getView().getModel("EV_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"sociedadModel_ev");n.getView().setModel(e,"sociedadModel");console.log("sociedadModel_ev cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}o.setProperty("/Global/isBusyVH",false)}catch(e){o.setProperty("/Global/isBusyVH",false);console.error("Error al cargar datos remotos:",e);i.error("Error cargando datos del backend EV.")}}else if(e===u){try{o.setProperty("/Global/isBusyVH",true);if(!this.getView().getModel("proveedorlModel_mp")){let e="/ZZ1_CDS_SEARCH_HELP_LIFNR";let t=this.getView().getModel("MP_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"proveedorlModel_mp");n.getView().setModel(e,"proveedorlModel");console.log("proveedorlModel_mp cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}if(!this.getView().getModel("sociedadModel_mp")){let e="/ZZ1_CDS_SEARCH_HELP_BUKRS";let t=this.getView().getModel("MP_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"sociedadModel_mp");n.getView().setModel(e,"sociedadModel");console.log("sociedadModel_mp cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}o.setProperty("/Global/isBusyVH",false)}catch(e){o.setProperty("/Global/isBusyVH",false);console.error("Error al cargar datos remotos:",e);i.error("Error cargando datos del backend MP.")}}else if(e===c){try{o.setProperty("/Global/isBusyVH",true);if(!this.getView().getModel("materialModel_pt")){let e="/ZZ1_CDS_SEARCH_HELP_PARNR";let t=this.getView().getModel("PT_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"materialModel_pt");n.getView().setModel(e,"materialModel");console.log("materialModel_pt cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}if(!this.getView().getModel("sociedadModel_pt")){let e="/ZZ1_CDS_SEARCH_HELP_BUKRS";let t=this.getView().getModel("PT_LayoutService");let o=e+"/$count";let l=await r(o,t);let d=5e3;console.log("Total de registros a cargar:",l);for(let o=0;o<l;o+=d){console.log(`Cargando registros desde ${o} hasta ${Math.min(o+d,l)}...`);let r=await a(o,d,t,e);s=s.concat(r.results||[])}if(s.length>0){let e=new sap.ui.model.json.JSONModel;e.setData(s);n.getView().setModel(e,"sociedadModel_pt");n.getView().setModel(e,"sociedadModel");console.log("sociedadModel_pt cargado con:",s.length,"registros")}else{i.warning(_msgSinResultados)}}o.setProperty("/Global/isBusyVH",fasle)}catch(e){o.setProperty("/Global/isBusyVH",false);console.error("Error al cargar datos remotos:",e);i.error("Error cargando datos del backend PT.")}}},clearTable:function(e){if(this.getView().getModel("requestModel").getProperty("/Global/tableEV")){if(this.getView().getModel("evLayoutModel")){this.getView().getModel("evLayoutModel").setData()}}else if(this.getView().getModel("requestModel").getProperty("/Global/tableMP")){if(this.getView().getModel("mpLayoutModel")){this.getView().getModel("mpLayoutModel").setData()}}if(this.getView().getModel("requestModel").getProperty("/Global/tablePT")){if(this.getView().getModel("ptLayoutModel")){this.getView().getModel("ptLayoutModel").setData()}}},poSelectionFinish:function(e){var t=e.getParameter("selectedItems");var o=[];if(t.length>0){t.forEach(e=>o.push({ebeln:e.getProperty("key")}))}this.getView().getModel("requestModel").setProperty("/po",[]);this.getView().getModel("requestModel").setProperty("/po",o)},materialSelectionFinish:function(e){var t=e.getParameter("selectedItems");var o=[];if(t.length>0){t.forEach(e=>o.push({Parnr:e.getProperty("key")}))}this.getView().getModel("requestModel").setProperty("/material",[]);this.getView().getModel("requestModel").setProperty("/material",o)},bukrsSelectionFinish:function(e){var t=e.getParameter("selectedItems");var o=[];if(t.length>0){t.forEach(e=>o.push({bukrs:e.getProperty("key")}))}this.getView().getModel("requestModel").setProperty("/Global/bukrs",[]);this.getView().getModel("requestModel").setProperty("/Global/bukrs",o)},clearAllFilters:function(e){let t=this.byId(e);let o=t.getColumns();for(let e=0;e<o.length;e++){t.filter(o[e],null)}},onVH_vbeln_request(e){console.log("onVH_vbeln_request");if(!this._oVH_factura_Dialog){this._oVH_factura_Dialog=a.load({name:"cuprum.zmm_ptplayouts.view.fragments.FacturaSelectionDialog",controller:this}).then(function(e){this.getView().addDependent(e);return e}.bind(this))}this._oVH_factura_Dialog.then(function(e){e.open()})},onClose_VH_vbeln(){var e=this;this._oVH_factura_Dialog.then(function(t){e.getView().getModel("requestModel").setProperty("/Virtual/factura_inicio","");e.getView().getModel("requestModel").setProperty("/Virtual/factura_fin","");t.close()})},includeInvoices(){var e=this;var t=this.get_Resource_Bundle();var o=t.getText("rangoFacturasIncluido");this._oVH_factura_Dialog.then(function(e){s.show(o);e.close()})},onClose_VH_ebeln(){var e=this;this._oVH_ebeln_Dialog.then(function(t){e.getView().getModel("requestModel").setProperty("/Virtual/oc_inicio","");e.getView().getModel("requestModel").setProperty("/Virtual/oc_fin","");t.close()})},includeEbeln(){var e=this;var t=this.get_Resource_Bundle();var o=t.getText("rangoOCIncluido");this._oVH_ebeln_Dialog.then(function(e){s.show(o);e.close()})},onVH_ebeln_request(e){console.log("onVH_ebeln_request");if(!this._oVH_ebeln_Dialog){this._oVH_ebeln_Dialog=a.load({name:"cuprum.zmm_ptplayouts.view.fragments.OC_SelectionDialog",controller:this}).then(function(e){this.getView().addDependent(e);return e}.bind(this))}this._oVH_ebeln_Dialog.then(function(e){e.open()})},onVH_material_request(e){const t="Material";this._loadRemoteOdataServices(_,t);console.log("onVH_material_request");if(!this._oVH_material_Dialog){this._oVH_material_Dialog=a.load({name:"cuprum.zmm_ptplayouts.view.fragments.MaterialSelectionDialog",controller:this}).then(function(e){this.getView().addDependent(e);a.byId("MaterialFragment","material_inicio")?.attachSuggestionItemSelected(this.onMaterialSelected,this);a.byId("MaterialFragment","material_fin")?.attachSuggestionItemSelected(this.onMaterialSelected,this);return e}.bind(this))}this._oVH_material_Dialog.then(function(e){e.open()})},onClose_VH_Material(){var e=this;this._oVH_material_Dialog.then(function(t){e.getView().getModel("requestModel").setProperty("/Global/material_inicio","");e.getView().getModel("requestModel").setProperty("/Global/material_fin","");t.close()})},includeMaterial(){var e=this.get_Resource_Bundle();var t=e.getText("rangoMaterialIncluido");this._oVH_material_Dialog.then(function(e){s.show(t);e.close()})},onVH_Sociedad_request:function(e){let t=this.getView();let o=this.get_Resource_Bundle();let l=t.getModel("requestModel");try{l.setProperty("/Global/isBusyVH",true);console.log("[INFO] Abriendo ValueHelp de Sociedad...");this._loadRemoteOdataServices(_);if(!this._oVH_sociedad_Dialog){this._oVH_sociedad_Dialog=a.load({name:"cuprum.zmm_ptplayouts.view.fragments.SociedadSelectionDialog",controller:this}).then(function(e){t.addDependent(e);return e})}this._oVH_sociedad_Dialog.then(function(e){e.open()}).catch(function(e){l.setProperty("/Global/isBusyVH",false);console.error("[ERROR] ValueHelp:",e);sap.m.MessageBox.error(o.getText("error.cargar_fragmento"))})}catch(e){l.setProperty("/Global/isBusyVH",false);sap.m.MessageBox.error(o.getText("error.proceso_general"))}},onClose_VH_Sociedad(){var e=this;this._oVH_sociedad_Dialog.then(function(t){e.getView().getModel("requestModel").setProperty("/Global/sociedad_inicio","");e.getView().getModel("requestModel").setProperty("/Global/sociedad_fin","");t.close()})},includeSociedad(){var e=this.get_Resource_Bundle();var t=e.getText("rangoSociedadIncluido");this._oVH_sociedad_Dialog.then(function(e){s.show(t);e.close()})},onSuggestMaterial:function(e){let t=e.getParameter("suggestValue").toLowerCase();let o=e.getSource();let l=o.getBinding("suggestionItems");if(l){let e=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("Parnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("ParnrDescription",sap.ui.model.FilterOperator.Contains,t)],and:false});l.filter([e])}},onSuggestSociedad:function(e){let t=e.getParameter("suggestValue").toLowerCase();let o=e.getSource();let l=o.getBinding("suggestionItems");if(l){let e=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("bukrs",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("butxt",sap.ui.model.FilterOperator.Contains,t)],and:false});l.filter([e])}},onSuggestProveedor:function(e){let t=e.getParameter("suggestValue").toLowerCase();let o=e.getSource();let l=o.getBinding("suggestionItems");if(l){let e=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("Lifnr",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("LifnrName",sap.ui.model.FilterOperator.Contains,t)],and:false});l.filter([e])}},onMaterialSelected:function(e){let t=e.getParameter("selectedItem");let o=e.getSource();if(t&&o){let e=t.getAdditionalText();let l=o.getBinding("value")?.getPath();if(l){this.getView().getModel("requestModel").setProperty(l,e)}o.setValue(e)}},onSociedadSelected:function(e){let t=e.getParameter("selectedItem");let o=e.getSource();if(t&&o){let e=t.getAdditionalText();let l=o.getBinding("value")?.getPath();if(l){this.getView().getModel("requestModel").setProperty(l,e)}o.setValue(e)}}})});
//# sourceMappingURL=Main.controller.js.map